<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="title" content="Happy Birthday Website 2.0 | Aoudumber Bade"/>
  <meta name="github" content="https://github.com/Aoudumber-Bade"/>
  <title>Birthday Gift Animation</title>

  <link rel="stylesheet" href="style.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer"/>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script>

  <script type="text/javascript">
  var colours=['#ff3366','#ff6699','#ff33cc','#ff99cc','#ff66b2','#ff0066'];
  var minisize=16,maxisize=28,hearts=66,over_or_under="over";
  var x=ox=400,y=oy=300,swide=800,shigh=600,sleft=sdown=0;
  var herz=[],herzx=[],herzy=[],herzs=[],kiss=false;

  if(typeof('addRVLoadEvent')!='function')function addRVLoadEvent(f){
    var o=window.onload;if(typeof(o)!='function')window.onload=f;else window.onload=function(){o&&o();f();}
  }
  addRVLoadEvent(mwah);

  function mwah(){ if(document.getElementById){
    var i,h;for(i=0;i<hearts;i++){
      h=createDiv("auto","auto");h.style.visibility="hidden";h.style.zIndex=(over_or_under=="over")?"1001":"0";
      h.style.color=colours[i%colours.length];h.style.pointerEvents="none";h.style.opacity=.75;
      h.appendChild(document.createTextNode(String.fromCharCode(9829)));document.body.appendChild(h);herz[i]=h;herzy[i]=false;
    }
    set_scroll();set_width();herzle();
  }}

  function herzle(){
    var c;if(Math.abs(x-ox)>1||Math.abs(y-oy)>1){
      ox=x;oy=y;
      for(c=0;c<hearts;c++) if(herzy[c]===false){
        herz[c].firstChild.nodeValue=String.fromCharCode(9829);
        herz[c].style.left=(herzx[c]=x-minisize/2)+"px";
        herz[c].style.top=(herzy[c]=y-minisize)+"px";
        herz[c].style.fontSize=minisize+"px";
        herz[c].style.fontWeight='normal';
        herz[c].style.visibility='visible';
        herzs[c]=minisize;break;
      }
    }
    for(c=0;c<hearts;c++) if(herzy[c]!==false) blow_me_a_kiss(c);
    setTimeout(herzle,20);
  }

  document.onmousedown=pucker;
  document.onmouseup=function(){clearTimeout(kiss);};

  function pucker(){ox=-1;oy=-1;kiss=setTimeout(pucker,60);}

  function blow_me_a_kiss(i){
    herzy[i]-=1.8*(herzs[i]/minisize + i%2);
    herzx[i]+=(i%5-2)/5;
    if(herzy[i]<sdown-herzs[i]||herzx[i]<sleft-herzs[i]||herzx[i]>sleft+swide-herzs[i]){
      herz[i].style.visibility="hidden";herzy[i]=false;
    } else if(herzs[i]>minisize+2 && Math.random()<.5/hearts){
      break_my_heart(i);
    } else {
      if(Math.random()<maxisize/herzy[i] && herzs[i]<maxisize) herz[i].style.fontSize=(++herzs[i])+"px";
      herz[i].style.top=herzy[i]+"px";herz[i].style.left=herzx[i]+"px";
    }
  }

  function break_my_heart(i){
    herz[i].firstChild.nodeValue=String.fromCharCode(9676);
    herz[i].style.fontWeight='bold';
    herzy[i]=false;
    setTimeout(()=>herz[i].style.visibility="hidden",300);
  }

  document.onmousemove=mouse;
  function mouse(e){ if(e){y=e.pageY;x=e.pageX;} else {set_scroll();y=event.y+sdown;x=event.x+sleft;} }

  window.onresize=set_width;
  function set_width(){ var sw_min=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;
    var sh_min=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;
    swide=sw_min;shigh=sh_min;
  }

  window.onscroll=set_scroll;
  function set_scroll(){
    sdown=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;
    sleft=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;
  }
  function createDiv(h,w){ var d=document.createElement("div"); d.style.position="absolute"; d.style.height=h; d.style.width=w; d.style.overflow="hidden"; d.style.backgroundColor="transparent"; return d; }
  </script>
</head>

<body>
  <div id="wrapper">
    <div class="flag__birthday">
      <img src="./images/1.png" alt="" width="350" class="flag__left">
      <img src="./images/1.png" alt="" width="350" class="flag__right">
    </div>

    <div class="content">
      <div class="left">
        <div class="title">
          <h1 class="happy">
            <span style="--t: 2s;">H</span>
            <span style="--t: 2.1s;">a</span>
            <span style="--t: 2.2s;">p</span>
            <span style="--t: 2.3s;">p</span>
            <span style="--t: 2.4s;">y</span>
          </h1>
          <h1 class="birthday">
            <span style="--t: 2.5s;">B</span>
            <span style="--t: 2.6s;">i</span>
            <span style="--t: 2.7s;">r</span>
            <span style="--t: 2.8s;">t</span>
            <span style="--t: 2.9s;">h</span>
            <span style="--t: 3s;">d</span>
            <span style="--t: 3.1s;">a</span>
            <span style="--t: 3.2s;">y</span>
          </h1>
          <div class="hat">
            <img src="./images/hat.png" alt="" width="130">
          </div>
        </div>

        <div class="date__of__birth">
          <span></span>
        </div>

        <div class="btn">
          <button id="btn__letter">
            Click here
            <i class="fa-regular fa-envelope"></i>
          </button>
        </div>
      </div>

      <div class="right">
        <div class="box__account">
          <div class="image">
            <img src="./images/r5.jpg" alt="">
          </div>
          <div class="name">
            <i class="fa-solid fa-heart"></i>
            <span>Bhavana Teresa Polisetty</span>
            <i class="fa-solid fa-heart"></i>
          </div>
          <div class="balloon_one">
            <img width="100px" src="./images/balloon1.png" alt="">
          </div>
          <div class="balloon_two">
            <img width="100px" src="./images/balloon2.png" alt="">
          </div>
        </div>

        <div class="cricle">
          <div class="text__cricle">
            <span style="--i: 1;">h</span>
            <span style="--i: 2;">a</span>
            <span style="--i: 3;">p</span>
            <span style="--i: 4;">p</span>
            <span style="--i: 5;">y</span>
            <span style="--i: 6;">-</span>
            <span style="--i: 7;">b</span>
            <span style="--i: 8;">i</span>
            <span style="--i: 9;">r</span>
            <span style="--i: 10;">t</span>
            <span style="--i: 11;">h</span>
            <span style="--i: 12;">d</span>
            <span style="--i: 13;">a</span>
            <span style="--i: 14;">y</span>
            <span style="--i: 15;">-</span>
          </div>
          <i class="fa-solid fa-heart"></i>
        </div>
      </div>
    </div>

    <div class="decorate_star star1" style="--t: 7.5s;"></div>
    <div class="decorate_star star2" style="--t: 7.6s;"></div>
    <div class="decorate_star star3" style="--t: 7.7s;"></div>
    <div class="decorate_star star4" style="--t: 7.8s;"></div>
    <div class="decorate_star star5" style="--t: 7.9s;"></div>

    <div class="decorate_flower--one" style="--t: 7.5s;">
      <img width="20" src="./images/decorate_flower.png" alt="">
    </div>
    <div class="decorate_flower--two" style="--t: 7.65s;">
      <img width="20" src="./images/decorate_flower.png" alt="">
    </div>
    <div class="decorate_flower--three" style="--t: 7.8s;">
      <img width="20" src="./images/decorate_flower.png" alt="">
    </div>

    <div class="decorate_bottom">
      <img src="./images/decorate.png" alt="" width="100">
    </div>
    <div class="smiley__icon">
      <img src="./images/smiley_icon.png" alt="" width="100">
    </div>

    <div class="box__letter">
      <div class="letter__border">
        <div class="letter">
          <div class="title__letter"></div>
          <div class="content__letter">
            <div class="left">
              <img id="heart__letter" src="https://media0.giphy.com/media/c76IJLufpNwSULPk77/giphy.gif" alt="">
              <img class="heart heart_1" style="--t: .2s" width="20" src="./images/heart.png" alt="">
              <img class="heart heart_2" style="--t: .4s" width="20" src="./images/heart.png" alt="">
              <img class="heart heart_3" style="--t: .6s" width="20" src="./images/heart.png" alt="">
              <img class="heart heart_4" style="--t: .8s" width="20" src="./images/heart.png" alt="">
            </div>
            <div class="right">
             
              <div class="text__letter"><p></p></div>
              <img id="mewmew" width="80" src="./images/mewmew.gif" alt="">
            </div>
          </div>
        </div>
        <div class="close"><i class="fa-solid fa-xmark"></i></div>
      </div>
    </div>
  </div>

  <script>
    let datetxt="30 October 2003";
    let datatxtletter="Happy birthday, Bhavana ‚ù§Ô∏è Every moment with you brings joy and warmth. You deserve all the love and happiness in the world today and always. Love you endlessly , Hope your day‚Äôs as fabulous as your smile üòÑüíê Love you tons!";
    let titleLetter="To you";
    let charArrDate=datetxt.split(''), charArrDateLetter=datatxtletter.split(''), charArrTitle=titleLetter.split('');
    let currentIndex=0,currentIndexLetter=0,currentIndexTitle=0;
    let date__of__birth=document.querySelector(".date__of__birth span");
    let text__letter=document.querySelector(".text__letter p");

    setTimeout(function(){
      timeDatetxt=setInterval(function(){
        if(currentIndex<charArrDate.length){
          date__of__birth.textContent+=charArrDate[currentIndex]; currentIndex++;
        } else {
          let i=document.createElement("i"); i.className="fa-solid fa-star";
          document.querySelector(".date__of__birth").prepend(i);
          document.querySelector(".date__of__birth").appendChild(i.cloneNode(true));
          clearInterval(timeDatetxt);
        }
      },50);
    },5000);

    var intervalContent,intervalTitle;
    $("#btn__letter").on("click",function(){
      $(".box__letter").slideDown(400);
      setTimeout(function(){ $(".letter__border").slideDown(400); },500);
      setTimeout(function(){
        intervalTitle=setInterval(function(){
          if(currentIndexTitle<charArrTitle.length){
            document.querySelector(".title__letter").textContent+=charArrTitle[currentIndexTitle];
            let i=document.createElement("i"); i.className="fa-solid fa-heart";
            document.querySelector(".title__letter").appendChild(i);
            currentIndexTitle++;
          } else { clearInterval(intervalTitle); }
        },70);
      },1000);
      setTimeout(function(){
        document.querySelector("#heart__letter").classList.add("animationOp");
        document.querySelector(".love__img").classList.add("animationOp");
        document.querySelector("#mewmew").classList.add("animationOp");
      },1800);
      setTimeout(function(){
        document.querySelectorAll(".heart").forEach((item)=>item.classList.add("animation"));
      },2200);
      setTimeout(function(){
        intervalContent=setInterval(function(){
          if(currentIndexLetter<charArrDateLetter.length){
            text__letter.textContent+=charArrDateLetter[currentIndexLetter]; currentIndexLetter++;
          } else { clearInterval(intervalContent); }
        },25);
      },3000);
    });

    $(".close").on("click",function(){
      clearInterval(intervalContent);
      document.querySelector(".title__letter").textContent="";
      text__letter.textContent="";
      currentIndexLetter=0; currentIndexTitle=0;
      document.querySelector("#heart__letter").classList.remove("animationOp");
      document.querySelector(".love__img").classList.remove("animationOp");
      document.querySelector("#mewmew").classList.remove("animationOp");
      document.querySelectorAll(".heart").forEach((item)=>item.classList.remove("animation"));
      $(".box__letter").slideUp(400); $(".letter__border").slideUp(400);
    });


     function resetLetterState() {
    clearInterval(intervalContent);
    clearInterval(intervalTitle);

    // reset text
    document.querySelector(".title__letter").textContent = "";
    document.querySelector(".text__letter p").textContent = "";
    currentIndexLetter = 0;
    currentIndexTitle = 0;

    // reset animations
    document.querySelector("#heart__letter").classList.remove("animationOp");
    document.querySelector(".love__img").classList.remove("animationOp");
    document.querySelector("#mewmew").classList.remove("animationOp");
    document.querySelectorAll(".heart").forEach((el) => el.classList.remove("animation"));
  }

  function closeLetter() {
    // hide inner box first, then the overlay
    $(".letter__border").stop(true, true).fadeOut(200, function () {
      $(".box__letter").stop(true, true).fadeOut(150);
    });
    resetLetterState();
  }

  // OPEN
  $("#btn__letter").on("click", function () {
    $(".box__letter").stop(true, true).fadeIn(150, function () {
      $(".letter__border").stop(true, true).fadeIn(200);
    });

    setTimeout(function () {
      intervalTitle = setInterval(function () {
        if (currentIndexTitle < charArrTitle.length) {
          document.querySelector(".title__letter").textContent += charArrTitle[currentIndexTitle];
          let i = document.createElement("i");
          i.className = "fa-solid fa-heart";
          document.querySelector(".title__letter").appendChild(i);
          currentIndexTitle++;
        } else { clearInterval(intervalTitle); }
      }, 70);
    }, 300);

    setTimeout(function () {
      document.querySelector("#heart__letter").classList.add("animationOp");
      document.querySelector(".love__img").classList.add("animationOp");
      document.querySelector("#mewmew").classList.add("animationOp");
    }, 500);

    setTimeout(function () {
      document.querySelectorAll(".heart").forEach((item) => item.classList.add("animation"));
    }, 700);

    setTimeout(function () {
      intervalContent = setInterval(function () {
        if (currentIndexLetter < charArrDateLetter.length) {
          text__letter.textContent += charArrDateLetter[currentIndexLetter];
          currentIndexLetter++;
        } else { clearInterval(intervalContent); }
      }, 25);
    }, 900);
  });

  // CLOSE (click X)
  $(document).on("click", ".close", function (e) {
    e.preventDefault();
    e.stopPropagation();
    closeLetter();
  });

  // OPTIONAL: click backdrop to close (but not when clicking the card)
  $(".box__letter").on("click", function (e) {
    if ($(e.target).closest(".letter__border").length === 0) {
      closeLetter();
    }
  });
  </script>
</body>
</html>
